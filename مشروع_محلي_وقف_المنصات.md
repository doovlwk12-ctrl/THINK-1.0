# مشروع محلي فقط (Local Only)

**آخر تحديث:** فبراير 2025  
المشروع يستخدم **PostgreSQL** (محلياً أو على Supabase). للتشغيل **محلياً فقط**: شغّل Postgres على جهازك (مثلاً Docker) + NextAuth. لا حاجة لـ Supabase ولا نشر سحابي.

---

## ماذا يعني "محلي فقط"

- **قاعدة البيانات:** PostgreSQL محلي (مثلاً عبر Docker أو تثبيت Postgres). راجع [docs/SUPABASE-DATABASE.md](./docs/SUPABASE-DATABASE.md) لأمر Docker.
- **المصادقة:** NextAuth (تسجيل دخول بالبريد وكلمة المرور محلياً). لا استخدام لـ Supabase Auth.
- **الملفات:** التخزين المحلي في `public/uploads/` إن لزم. لا S3 ولا Cloudinary.
- **النشر:** لا يُفترض النشر على Vercel أو غيرها في هذا الوضع.

---

## تشغيل المشروع محلياً

### 1. إعداد ملف البيئة

```bash
cp .env.example .env
```

عدّل `.env` كالتالي:

- **DATABASE_URL:** رابط PostgreSQL محلي، مثلاً:  
  `postgresql://user:password@localhost:5432/think_db`  
  (بعد تشغيل Postgres محلياً، راجع [docs/SUPABASE-DATABASE.md](./docs/SUPABASE-DATABASE.md)).
- **NEXTAUTH_SECRET:** أي سلسلة طويلة عشوائية (32 حرفاً فأكثر).
- **NEXTAUTH_URL:** `http://localhost:3000`

**مهم:** لا تضف أي متغيرات Supabase (لا `NEXT_PUBLIC_USE_SUPABASE_AUTH` ولا غيرها) حتى يبقى المشروع محلياً فقط.

### 2. تشغيل التطبيق

```bash
npm install
npx prisma generate
npx prisma db push
npm run dev
```

**ملاحظة:** إن ظهر خطأ EPERM عند `prisma generate`، أوقف خادم التطوير (Ctrl+C) ثم نفّذ الأمرين مرة أخرى.

افتح [http://localhost:3000](http://localhost:3000).

### 3. إنشاء مستخدم (اختياري)

التسجيل متاح من الواجهة (`/register`). أو استخدم `npm run db:seed` لبيانات تجريبية إن وُجد.

---

## استئناف النشر أو Supabase لاحقاً

عند الرغبة باستخدام Supabase أو النشر على Vercel/Render، راجع [رفع_على_المنصات.md](رفع_على_المنصات.md) و [docs/DEPLOYMENT.md](docs/DEPLOYMENT.md). ضبط المتغيرات في `.env` (أو في لوحة المنصة) كافٍ؛ لا حاجة لتغيير الكود.
