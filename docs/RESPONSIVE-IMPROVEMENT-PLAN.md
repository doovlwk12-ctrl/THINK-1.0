# خطة شاملة لتحسين الواجهات لجميع الأجهزة — منصة فكرة

تهدف هذه الخطة إلى ضمان تناسب جميع واجهات المنصة مع الجوال والتابلت وسطح المكتب، في كل مراحل سير المشروع وجميع الصفحات ومنافذ الاستخدام.

---

## 1. نقاط التوقف (Breakpoints) والمعايير العالمية

### 1.1 نقاط التوقف المعتمدة (Tailwind)

| المفتاح | العرض   | الاستخدام المقترح           |
|--------|---------|-----------------------------|
| (default) | &lt; 375px | هواتف صغيرة جداً            |
| xs     | 375px   | iPhone SE، هواتف ضيقة       |
| sm     | 640px   | هواتف كبيرة، بداية التابلت |
| md     | 768px   | تابلت عمودي                 |
| lg     | 1024px  | تابلت أفقي / لابتوب صغير    |
| xl     | 1280px  | سطح مكتب                    |
| 2xl    | 1536px  | شاشات واسعة                 |

### 1.2 قواعد عالمية يجب تطبيقها في كل الصفحات

- **مناطق اللمس (Touch targets):** حد أدنى 44×44px للأزرار والروابط التفاعلية على الجوال (استخدام كلاس `touch-target` أو `min-w-[2.75rem] min-h-[2.75rem]`).
- **Safe area:** احترام `env(safe-area-inset-*)` في الهيدر والفوتر والمحتوى الملاصق للحواف (الموجود في `body` وكلاس `.safe-container`).
- **اتجاه RTL:** جميع الواجهات تعمل بـ `dir="rtl"` و`lang="ar"`؛ التأكد من أن الهوامش والـ padding (start/end) متناسقة.
- **لا horizontal scroll:** تجنب `overflow-x` غير المقصود؛ استخدام `min-w-0` عند الحاجة داخل flex/grid.
- **النصوص:** عدم قص النص؛ استخدام `break-words` ومساحات كافية؛ العناوين تستجيب بحجم الشاشة (`text-lg sm:text-xl md:text-2xl` وما شابه).

---

## 2. جرد الصفحات حسب الدور وسير العمل

### 2.1 صفحات عامة (لا تحتاج تسجيل دخول)

| المسار | الوصف | أولوية التحسين |
|--------|--------|-----------------|
| `/` | الصفحة الرئيسية (Hero، من نحن، العملية، الباقات، FAQ، CTA، Footer) | عالية |
| `/login` | تسجيل الدخول | عالية |
| `/register` | إنشاء حساب | عالية |
| `/forgot-password` | نسيت كلمة المرور | متوسطة |
| `/forgot-email` | نسيت البريد | متوسطة |
| `/reset-password` | إعادة تعيين كلمة المرور | متوسطة |
| `/engineer/apply/[token]` | صفحة تقديم المهندس (رابط الدعوة) | متوسطة |

### 2.2 مسار العميل (Client) — من إنشاء الطلب حتى الإغلاق

| المسار | الوصف | أولوية التحسين |
|--------|--------|-----------------|
| `/dashboard` | لوحة تحكم العميل + قائمة الطلبات | عالية |
| `/dashboard/profile` | الملف الشخصي وإعدادات الحساب | عالية |
| `/orders/select-package` | اختيار الباقة قبل إنشاء الطلب | عالية |
| `/orders/create` | إنشاء طلب جديد (نموذج الخطوات) | عالية |
| `/orders/[id]` | تفاصيل الطلب (حالة، مخططات، أزرار إجراءات) | عالية |
| `/orders/[id]/payment` | صفحة الدفع | عالية |
| `/orders/[id]/chat` | محادثة الطلب | عالية |
| `/orders/[id]/revision` | طلب تعديل (دبابيس + ملاحظات) | عالية |
| `/orders/[id]/select-package` | اختيار باقة من داخل الطلب | متوسطة |
| `/orders/[id]/buy-revisions` | شراء تعديلات إضافية | متوسطة |
| `/orders/[id]/buy-pin-pack` | شراء مجموعة دبابيس | متوسطة |

### 2.3 مسار المهندس (Engineer)

| المسار | الوصف | أولوية التحسين |
|--------|--------|-----------------|
| `/engineer/dashboard` | لوحة تحكم المهندس + قائمة الطلبات | عالية |
| `/engineer/orders/[id]` | تفاصيل الطلب + رفع المخططات + تغيير الحالة + قسم «تغييرات» | عالية |
| `/engineer/orders/[id]/chat` | محادثة الطلب | عالية |
| `/engineer/orders/[id]/revision/[revisionId]` | صفحة تنفيذ تعديل معين | عالية |

### 2.4 مسار الأدمن (Admin)

| المسار | الوصف | أولوية التحسين |
|--------|--------|-----------------|
| `/admin/dashboard` | لوحة تحكم الأدمن + إحصائيات | عالية |
| `/admin/orders` | جميع الطلبات + فلترة وترقيم | عالية |
| `/admin/engineers` | إدارة المهندسين | عالية |
| `/admin/engineers/applications` | طلبات انضمام المهندسين | عالية |
| `/admin/packages` | إدارة الباقات | عالية |
| `/admin/content/homepage` | محتوى الصفحة الرئيسية | متوسطة |
| `/admin/settings/pin-pack` | إعدادات مجموعة الدبابيس | متوسطة |
| `/admin/settings/revisions-purchase` | إعدادات شراء التعديلات | متوسطة |

### 2.5 مكونات مشتركة (تؤثر على كل الصفحات)

| المكون | الوصف | أولوية |
|--------|--------|--------|
| `Header` | شعار، تنقل، أيقونات (قائمة، مستخدم، إشعارات، ثيم) | عالية |
| `UserMenu` (dropdown) | قائمة المستخدم بعد النقر على الأيقونة | عالية |
| `BackButton` | زر العودة | متوسطة |
| `Button` / `Input` / `Card` | مكونات مشتركة | عالية |
| `Loading` | شاشة تحميل | متوسطة |
| `Toaster` (react-hot-toast) | إشعارات مؤقتة | متوسطة |

---

## 3. تحسينات مخصصة حسب الصفحة / القسم

### 3.1 الهيدر (Header)

- [ ] على الجوال: تباعد كافٍ بين أيقونات (قائمة، مستخدم، إشعارات، ثيم) حتى لا تتكدس ولا تتداخل مع النص.
- [ ] استخدام `touch-target` أو حد أدنى 44px لجميع الأيقونات القابلة للنقر.
- [ ] القائمة المنسدلة (هامبرغر) تفتح بشكل كامل وتكون قابلة للإغلاق بسهولة؛ النصوص والأزرار داخل القائمة بحجم مناسب للمس.
- [ ] على الشاشات الضيقة: اختصار النص (مثلاً «الرئيسية» بدل «العودة للصفحة الرئيسية») إن وُجد دون كسر المعنى.

### 3.2 الصفحة الرئيسية `/`

- [x] قسم «التفكير بطريقة هندسية لمشروعك»: الأيقونات في صف مستقل على الجوال مع مسافة تحت الأيقونة (تم جزئياً).
- [ ] التأكد من أن جميع الأقسام (Hero، About، Process، Packages، FAQ، CTA، Footer) لا تعاني overflow أو قص نصوص على xs/sm.
- [ ] أزرار CTA والعناوين متجاوبة مع حجم الشاشة.
- [ ] الصور أو الخلفيات لا تسبب horizontal scroll.

### 3.3 صفحات المصادقة (تسجيل الدخول، إنشاء حساب، نسيت كلمة المرور، إلخ)

- [ ] النماذج بعرض مناسب على الجوال (مثلاً `max-w-md` أو `max-w-xs` مع `w-full`) وpadding جانبي كافٍ.
- [ ] حقول الإدخال والأزرار بارتفاع مريح للمس (لا تقل عن 44px للارتفاع الفعلي للمس).
- [ ] رسالة انتظار دقيقة (بعد تجاوز حد التسجيل) والعدّ التنازلي تظهر بوضوح على الجوال.

### 3.4 لوحة تحكم العميل `/dashboard`

- [ ] قائمة الطلبات: كل بطاقة طلب تظهر بشكل واضح على الجوال؛ الأزرار (تفاصيل، محادثة، إلخ) لا تتداخل ولا تُقص.
- [ ] ترتيب العناصر (حالة، رقم طلب، تاريخ، أزرار) يتكيف عمودياً أو في شبكة من عمودين على الشاشات الصغيرة.

### 3.5 تفاصيل الطلب (عميل) `/orders/[id]`

- [ ] أزرار الإجراءات (دفع، محادثة، طلب تعديل، تحميل مخطط، إلخ) مرتبة بشكل واضح على الجوال مع مسافات كافية.
- [ ] قائمة المخططات وروابط التحميل قابلة للاستخدام على الشاشات الصغيرة.

### 3.6 صفحة المحادثة (عميل/مهندس) `/orders/[id]/chat` و `/engineer/orders/[id]/chat`

- [ ] منطقة الرسائل لا تُقص؛ حقل الإدخال وزر الإرسال بحجم مريح للمس.
- [ ] الفقاعات والوقت والنص تبقى مقروءة على الشاشات الضيقة.

### 3.7 صفحة المهندس: تفاصيل الطلب + رفع المخططات `/engineer/orders/[id]`

- [ ] **قسم رفع المخططات:** عنوان «المخطط (حد أقصى 6 ملفات)» والنصائح (حد 10MB، 30MB، 5MB بعد الحفظ) تظهر كاملة دون تداخل؛ استخدام أسطر متعددة أو طيّ النص على الجوال إن لزم.
- [ ] منطقة اختيار الملفات وزر «رفع المخططات» بعرض كامل أو شريط ثابت في الأسفل مع safe-area.
- [ ] **قسم «تغييرات»:** كل سطر تغيير (تاريخ عربي + حالة إنجليزي مثل PENDING → IN_PROGRESS) لا يفيض أفقياً؛ إما تقصير النص أو سطر جديد أو `break-words` و`overflow-wrap` لتجنب الخروج عن الإطار.
- [ ] أزرار تغيير الحالة والقوائم المنسدلة بحجم لمس مناسب.

### 3.8 صفحة التعديل (عميل) `/orders/[id]/revision`

- [ ] واجهة الدبابيس والملاحظات قابلة للاستخدام على الشاشات الصغيرة (لمس، سحب، تكبير/تصغير إن وُجد).
- [ ] أزرار «إرسال طلب التعديل» و«العودة» واضحة وقابلة للنقر.

### 3.9 صفحة تنفيذ التعديل (مهندس) `/engineer/orders/[id]/revision/[revisionId]`

- [ ] عرض المخطط والدبابيس والملاحظات متجاوب؛ الأزرار والإجراءات مناسبة للمس.

### 3.10 لوحة الأدمن (جميع الطلبات، المهندسين، الباقات، الإعدادات)

- [ ] الجداول أو قوائم البطاقات تتكيف: على الجوال إما بطاقات عمودية أو جدول قابل للتمرير الأفقي دون كسر التخطيط العام.
- [ ] الفلاتر وزر «السابق/التالي» للترقيم بحجم مريح للمس.

### 3.11 صفحة الدفع `/orders/[id]/payment`

- [ ] نموذج الدفع والعناصر الخارجية (إن وُجدت) تتكيف مع العرض؛ لا قص لحقول مهمة.

### 3.12 صفحة الملف الشخصي `/dashboard/profile`

- [ ] الحقول والأزرار (تحديث الاسم، البريد، كلمة المرور) مرتبة بشكل عمودي على الجوال مع مسافات كافية.

---

## 4. مراحل التنفيذ المقترحة

### المرحلة 1 — أساسيات مشتركة (أولوية عالية)

1. **الهيدر و UserMenu:** تباعد الأيقونات، touch targets، قائمة الجوال.
2. **المكونات المشتركة:** التأكد من `Button`، `Input`، `Card` في جميع الأحجام (ارتفاع، padding، خط).
3. **الصفحة الرئيسية:** مراجعة كل قسم على xs/sm/md وتصحيح أي overflow أو تداخل.

### المرحلة 2 — مسار العميل الكامل

1. لوحة التحكم + قائمة الطلبات.
2. إنشاء الطلب (اختيار باقة + نموذج الإنشاء).
3. تفاصيل الطلب + أزرار الإجراءات.
4. المحادثة.
5. صفحة التعديل (دبابيس وملاحظات).
6. الدفع وشراء التعديلات/الدبابيس.

### المرحلة 3 — مسار المهندس

1. لوحة تحكم المهندس.
2. صفحة تفاصيل الطلب: رفع المخططات، نصائح الحجم، قسم «تغييرات» (منع فيض النص والخلط العربي/الإنجليزي).
3. المحادثة وصفحة تنفيذ التعديل.

### المرحلة 4 — مسار الأدمن وصفحات إضافية

1. لوحة الأدمن وجميع الطلبات والمهندسين والباقات.
2. إعدادات الأدمن ومحتوى الصفحة الرئيسية.
3. صفحات نسيت كلمة المرور/البريد وإعادة التعيين وطلب انضمام المهندس.

### المرحلة 5 — مراجعة واختبار نهائي

1. اختبار فعلي على أجهزة متعددة (أو محاكاة): iPhone SE، iPhone 14، iPad، Desktop.
2. التأكد من safe-area على أجهزة بها نوتش.
3. مراجعة RTL في كل الصفحات وعدم وجود horizontal scroll غير مقصود.

---

## 5. معايير النجاح (Checklist عام)

- [ ] لا يوجد horizontal scroll غير مقصود في أي صفحة من 320px حتى 1920px.
- [ ] جميع الأزرار والروابط التفاعلية لا تقل عن 44×44px في منطقة اللمس على الجوال.
- [ ] النصوص والعناوين لا تُقص؛ التكسر والمسافات مناسبة لـ RTL.
- [ ] الأيقونات لا تتداخل مع المحتوى النصي (كما في قسم «التفكير بطريقة هندسية» وقسم رفع المخططات وتغييرات الطلب).
- [ ] الهيدر والفوتر والمحتوى الملاصق للحواف يحترمون safe-area.
- [ ] الجداول والقوائم الطويلة إما تتكيف عمودياً أو لديها تمرير واضح دون كسر التخطيط.
- [ ] صفحات النماذج (تسجيل، إنشاء طلب، دفع، إعدادات) مريحة على الجوال من حيث الحجم والتباعد.

---

## 6. مراجع داخل المشروع

- **نقاط التوقف والـ container:** `tailwind.config.js` (screens, container).
- **Safe area و touch-target:** `app/globals.css` (env(safe-area-inset-*), .touch-target, .safe-container).
- **سير عمل الطلب:** `docs/ORDER-WORKFLOW.md`.
- **قائمة صفحات واختبار استجابي سابق:** `RESPONSIVE_TESTING.md`.

يمكن استخدام هذا الملف كمرجع أثناء تنفيذ التحسينات وتحديث حالة كل بند (مكتمل / قيد التنفيذ) حسب التقدم.
